{"filter":false,"title":"app.js","tooltip":"/todo_api/public/app.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":79,"column":1},"action":"insert","lines":["/* global $ */","$(document).ready(function(){","  $.getJSON(\"/api/todos\")","  .then(addTodos)","  ","  $('#todoInput').keypress(function(event){","    if(event.which == 13) {","      createTodo();","    }","  });","  ","  $('.list').on('click', 'li', function(){","    updateTodo($(this));","  })","  ","  $('.list').on('click', 'span', function(e){","    e.stopPropagation();","    removeTodo($(this).parent());","  })","});","","function addTodos(todos) {","  //add todos to page here","  todos.forEach(function(todo){","    addTodo(todo);","  });","}","","function addTodo(todo){","  var newTodo = $('<li class=\"task\">'+todo.name +' <span>X</span></li>');","  newTodo.data('id', todo._id);","  newTodo.data('completed', todo.completed);","  if(todo.completed){","    newTodo.addClass(\"done\");","  }","  $('.list').append(newTodo);","}","","function createTodo(){","  //send request to create new todo","  var usrInput = $('#todoInput').val();","  $.post('/api/todos',{name: usrInput})","  .then(function(newTodo){","    $('#todoInput').val('');","    addTodo(newTodo);","  })","  .catch(function(err){","    console.log(err);","  })","}","","function removeTodo(todo){","  var clickedId = todo.data('id');","  var deleteUrl = '/api/todos/' + clickedId; ","  $.ajax({","    method: 'DELETE',","    url: deleteUrl","  })","  .then(function(data){","    todo.remove();","  })","  .catch(function(err){","    console.log(err);","  })","}","","function updateTodo(todo){","  var updateUrl = '/api/todos/' + todo.data('id');","  var isDone = !todo.data('completed');","  var updateData = {completed: isDone}","  $.ajax({","    method: 'PUT',","    url: updateUrl,","    data: updateData","  })","  .then(function(updatedTodo){","    todo.toggleClass(\"done\");","    todo.data('completed', isDone);","  })","}"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":79,"column":1},"end":{"row":79,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1525436304875,"hash":"712f2671b448a76bc4aa5f55528c7e2bb84c26f0"}